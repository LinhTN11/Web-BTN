{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\trann\\\\Desktop\\\\jwt-bt\\\\frontend\\\\src\\\\pages\\\\Users\\\\Users.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, Table, Button, Avatar, Tag, Space, Popconfirm, message, Typography, Input, Modal, Form } from 'antd';\nimport { UserOutlined, DeleteOutlined, SearchOutlined, CheckCircleOutlined, CloseCircleOutlined, EditOutlined } from '@ant-design/icons';\nimport { userAPI } from '../../services/api';\nimport { useAuth } from '../../contexts/AuthContext';\nimport './Users.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Title\n} = Typography;\nconst {\n  Search\n} = Input;\nconst Users = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchText, setSearchText] = useState('');\n  const [editModalVisible, setEditModalVisible] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [editingEmailUserId, setEditingEmailUserId] = useState(null);\n  const [tempEmail, setTempEmail] = useState('');\n  const [editForm] = Form.useForm();\n  const {\n    user: currentUser\n  } = useAuth();\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      const usersData = await userAPI.getAllUsers();\n      setUsers(usersData);\n    } catch (error) {\n      message.error('Không thể tải danh sách người dùng');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDeleteUser = async userId => {\n    try {\n      await userAPI.deleteUser(userId);\n      setUsers(users.filter(user => user._id !== userId));\n      message.success('Xóa người dùng thành công');\n    } catch (error) {\n      message.error('Không thể xóa người dùng');\n    }\n  };\n  const handleEditUser = user => {\n    setEditingUser(user);\n    editForm.setFieldsValue({\n      username: user.username,\n      email: user.email\n    });\n    setEditModalVisible(true);\n  };\n  const handleUpdateUser = async values => {\n    if (!editingUser) return;\n    try {\n      const updatedUser = await userAPI.updateUserByAdmin(editingUser._id, values);\n      setUsers(users.map(user => user._id === editingUser._id ? updatedUser.user : user));\n      message.success('Cập nhật thông tin người dùng thành công');\n      setEditModalVisible(false);\n      setEditingUser(null);\n      editForm.resetFields();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      message.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Không thể cập nhật thông tin người dùng');\n    }\n  };\n  const handleCancelEdit = () => {\n    setEditModalVisible(false);\n    setEditingUser(null);\n    editForm.resetFields();\n  };\n  const handleEmailClick = user => {\n    if ((currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'admin') {\n      setEditingEmailUserId(user._id);\n      setTempEmail(user.email);\n    }\n  };\n  const handleEmailSave = async userId => {\n    try {\n      const updatedUser = await userAPI.updateUserByAdmin(userId, {\n        email: tempEmail\n      });\n      setUsers(users.map(user => user._id === userId ? updatedUser.user : user));\n      message.success('Cập nhật email thành công');\n      setEditingEmailUserId(null);\n      setTempEmail('');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      message.error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Không thể cập nhật email');\n    }\n  };\n  const handleEmailCancel = () => {\n    setEditingEmailUserId(null);\n    setTempEmail('');\n  };\n  const handleEmailKeyPress = (e, userId) => {\n    if (e.key === 'Enter') {\n      handleEmailSave(userId);\n    } else if (e.key === 'Escape') {\n      handleEmailCancel();\n    }\n  };\n  const filteredUsers = users.filter(user => user.username.toLowerCase().includes(searchText.toLowerCase()) || user.email.toLowerCase().includes(searchText.toLowerCase()));\n  const columns = [{\n    title: 'Avatar',\n    dataIndex: 'avatar',\n    key: 'avatar',\n    width: 80,\n    render: (avatar, record) => /*#__PURE__*/_jsxDEV(Avatar, {\n      size: \"large\",\n      icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this),\n      src: avatar,\n      className: \"user-avatar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: 'Tên đăng nhập',\n    dataIndex: 'username',\n    key: 'username',\n    sorter: (a, b) => a.username.localeCompare(b.username)\n  }, {\n    title: 'Email',\n    dataIndex: 'email',\n    key: 'email',\n    sorter: (a, b) => a.email.localeCompare(b.email),\n    render: (email, record) => {\n      if (editingEmailUserId === record._id && (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'admin') {\n        return /*#__PURE__*/_jsxDEV(Input, {\n          value: tempEmail,\n          onChange: e => setTempEmail(e.target.value),\n          onBlur: () => handleEmailSave(record._id),\n          onKeyDown: e => handleEmailKeyPress(e, record._id),\n          style: {\n            width: '100%',\n            border: '1px solid #1890ff'\n          },\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => handleEmailClick(record),\n        style: {\n          cursor: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'admin' ? 'pointer' : 'default',\n          padding: '4px 8px',\n          borderRadius: '4px',\n          transition: 'background-color 0.2s',\n          display: 'block',\n          ':hover': (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'admin' ? {\n            backgroundColor: '#f0f0f0'\n          } : {}\n        },\n        className: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'admin' ? 'editable-email' : '',\n        title: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'admin' ? 'Click để chỉnh sửa email' : '',\n        children: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this);\n    }\n  }, {\n    title: 'Trạng thái',\n    dataIndex: 'isOnline',\n    key: 'isOnline',\n    width: 120,\n    render: isOnline => /*#__PURE__*/_jsxDEV(Tag, {\n      icon: isOnline ? /*#__PURE__*/_jsxDEV(CheckCircleOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 28\n      }, this) : /*#__PURE__*/_jsxDEV(CloseCircleOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 54\n      }, this),\n      color: isOnline ? 'success' : 'default',\n      children: isOnline ? 'Online' : 'Offline'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }, this),\n    filters: [{\n      text: 'Online',\n      value: true\n    }, {\n      text: 'Offline',\n      value: false\n    }],\n    onFilter: (value, record) => record.isOnline === value\n  }, {\n    title: 'Vai trò',\n    dataIndex: 'role',\n    key: 'role',\n    width: 100,\n    render: role => /*#__PURE__*/_jsxDEV(Tag, {\n      color: role === 'admin' ? 'red' : 'blue',\n      children: role === 'admin' ? 'Admin' : 'User'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }, this),\n    filters: [{\n      text: 'Admin',\n      value: 'admin'\n    }, {\n      text: 'User',\n      value: 'user'\n    }],\n    onFilter: (value, record) => record.role === value\n  }, {\n    title: 'Hoạt động cuối',\n    dataIndex: 'lastActive',\n    key: 'lastActive',\n    width: 150,\n    render: lastActive => {\n      if (!lastActive) return '-';\n      return new Date(lastActive).toLocaleString('vi-VN');\n    },\n    sorter: (a, b) => {\n      if (!a.lastActive) return 1;\n      if (!b.lastActive) return -1;\n      return new Date(a.lastActive).getTime() - new Date(b.lastActive).getTime();\n    }\n  }, {\n    title: 'Hành động',\n    key: 'actions',\n    width: 120,\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'admin' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          icon: /*#__PURE__*/_jsxDEV(EditOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 23\n          }, this),\n          size: \"small\",\n          onClick: () => handleEditUser(record),\n          title: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }, this), record._id !== currentUser._id && /*#__PURE__*/_jsxDEV(Popconfirm, {\n          title: \"X\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng\",\n          description: \"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0y?\",\n          onConfirm: () => handleDeleteUser(record._id),\n          okText: \"X\\xF3a\",\n          cancelText: \"H\\u1EE7y\",\n          okType: \"danger\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            danger: true,\n            icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 27\n            }, this),\n            size: \"small\",\n            title: \"X\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"users-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"users-header\",\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 2,\n        children: \"Qu\\u1EA3n l\\xFD ng\\u01B0\\u1EDDi d\\xF9ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"users-actions\",\n        children: /*#__PURE__*/_jsxDEV(Search, {\n          placeholder: \"T\\xECm ki\\u1EBFm theo t\\xEAn ho\\u1EB7c email\",\n          allowClear: true,\n          enterButton: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 26\n          }, this),\n          size: \"large\",\n          onChange: e => setSearchText(e.target.value),\n          style: {\n            width: 300\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"users-card\",\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        columns: columns,\n        dataSource: filteredUsers,\n        rowKey: \"_id\",\n        loading: loading,\n        pagination: {\n          pageSize: 10,\n          showSizeChanger: false,\n          showQuickJumper: true,\n          position: ['bottomLeft'],\n          showTotal: (total, range) => `${range[0]}-${range[1]} của ${total} người dùng`,\n          size: \"default\"\n        },\n        className: \"users-table\",\n        rowClassName: () => 'table-row',\n        bordered: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng\",\n      open: editModalVisible,\n      onCancel: handleCancelEdit,\n      footer: null,\n      width: 500,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: editForm,\n        layout: \"vertical\",\n        onFinish: handleUpdateUser,\n        preserve: false,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"username\",\n          label: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\",\n          rules: [{\n            required: true,\n            message: 'Vui lòng nhập tên đăng nhập!'\n          }, {\n            min: 6,\n            message: 'Tên đăng nhập phải có ít nhất 6 ký tự!'\n          }, {\n            max: 20,\n            message: 'Tên đăng nhập không được quá 20 ký tự!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Nh\\u1EADp t\\xEAn \\u0111\\u0103ng nh\\u1EADp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"email\",\n          label: \"Email\",\n          rules: [{\n            required: true,\n            message: 'Vui lòng nhập email!'\n          }, {\n            type: 'email',\n            message: 'Vui lòng nhập email hợp lệ!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Nh\\u1EADp email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(Space, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              children: \"C\\u1EADp nh\\u1EADt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleCancelEdit,\n              children: \"H\\u1EE7y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 286,\n    columnNumber: 5\n  }, this);\n};\n_s(Users, \"pTRKZZFj7Lu3rWA2xYNz7V5Pd7g=\", false, function () {\n  return [Form.useForm, useAuth];\n});\n_c = Users;\nexport default Users;\nvar _c;\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Avatar","Tag","Space","Popconfirm","message","Typography","Input","Modal","Form","UserOutlined","DeleteOutlined","SearchOutlined","CheckCircleOutlined","CloseCircleOutlined","EditOutlined","userAPI","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","Title","Search","Users","_s","users","setUsers","loading","setLoading","searchText","setSearchText","editModalVisible","setEditModalVisible","editingUser","setEditingUser","editingEmailUserId","setEditingEmailUserId","tempEmail","setTempEmail","editForm","useForm","user","currentUser","fetchUsers","usersData","getAllUsers","error","handleDeleteUser","userId","deleteUser","filter","_id","success","handleEditUser","setFieldsValue","username","email","handleUpdateUser","values","updatedUser","updateUserByAdmin","map","resetFields","_error$response","_error$response$data","response","data","handleCancelEdit","handleEmailClick","role","handleEmailSave","_error$response2","_error$response2$data","handleEmailCancel","handleEmailKeyPress","e","key","filteredUsers","toLowerCase","includes","columns","title","dataIndex","width","render","avatar","record","size","icon","fileName","_jsxFileName","lineNumber","columnNumber","src","className","sorter","a","b","localeCompare","value","onChange","target","onBlur","onKeyDown","style","border","autoFocus","onClick","cursor","padding","borderRadius","transition","display","backgroundColor","children","isOnline","color","filters","text","onFilter","lastActive","Date","toLocaleString","getTime","_","type","description","onConfirm","okText","cancelText","okType","danger","level","placeholder","allowClear","enterButton","dataSource","rowKey","pagination","pageSize","showSizeChanger","showQuickJumper","position","showTotal","total","range","rowClassName","bordered","open","onCancel","footer","form","layout","onFinish","preserve","Item","name","label","rules","required","min","max","htmlType","_c","$RefreshReg$"],"sources":["C:/Users/trann/Desktop/jwt-bt/frontend/src/pages/Users/Users.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Card, \r\n  Table, \r\n  Button, \r\n  Avatar, \r\n  Tag, \r\n  Space, \r\n  Popconfirm, \r\n  message, \r\n  Typography,\r\n  Input,\r\n  Modal,\r\n  Form\r\n} from 'antd';\r\nimport { \r\n  UserOutlined, \r\n  DeleteOutlined, \r\n  SearchOutlined,\r\n  CheckCircleOutlined,\r\n  CloseCircleOutlined,\r\n  EditOutlined\r\n} from '@ant-design/icons';\r\nimport { userAPI } from '../../services/api';\r\nimport { User } from '../../types';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport type { ColumnsType } from 'antd/es/table';\r\nimport './Users.css';\r\n\r\nconst { Title } = Typography;\r\nconst { Search } = Input;\r\n\r\nconst Users: React.FC = () => {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [editModalVisible, setEditModalVisible] = useState(false);\r\n  const [editingUser, setEditingUser] = useState<User | null>(null);\r\n  const [editingEmailUserId, setEditingEmailUserId] = useState<string | null>(null);\r\n  const [tempEmail, setTempEmail] = useState('');\r\n  const [editForm] = Form.useForm();\r\n  const { user: currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const usersData = await userAPI.getAllUsers();\r\n      setUsers(usersData);\r\n    } catch (error) {\r\n      message.error('Không thể tải danh sách người dùng');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const handleDeleteUser = async (userId: string) => {\r\n    try {\r\n      await userAPI.deleteUser(userId);\r\n      setUsers(users.filter(user => user._id !== userId));\r\n      message.success('Xóa người dùng thành công');\r\n    } catch (error) {\r\n      message.error('Không thể xóa người dùng');\r\n    }\r\n  };\r\n\r\n  const handleEditUser = (user: User) => {\r\n    setEditingUser(user);\r\n    editForm.setFieldsValue({\r\n      username: user.username,\r\n      email: user.email,\r\n    });\r\n    setEditModalVisible(true);\r\n  };\r\n\r\n  const handleUpdateUser = async (values: any) => {\r\n    if (!editingUser) return;\r\n    \r\n    try {\r\n      const updatedUser = await userAPI.updateUserByAdmin(editingUser._id, values);\r\n      setUsers(users.map(user => \r\n        user._id === editingUser._id ? updatedUser.user : user\r\n      ));\r\n      message.success('Cập nhật thông tin người dùng thành công');\r\n      setEditModalVisible(false);\r\n      setEditingUser(null);\r\n      editForm.resetFields();\r\n    } catch (error: any) {\r\n      message.error(error.response?.data?.message || 'Không thể cập nhật thông tin người dùng');\r\n    }\r\n  };\r\n  const handleCancelEdit = () => {\r\n    setEditModalVisible(false);\r\n    setEditingUser(null);\r\n    editForm.resetFields();\r\n  };\r\n\r\n  const handleEmailClick = (user: User) => {\r\n    if (currentUser?.role === 'admin') {\r\n      setEditingEmailUserId(user._id);\r\n      setTempEmail(user.email);\r\n    }\r\n  };\r\n\r\n  const handleEmailSave = async (userId: string) => {\r\n    try {\r\n      const updatedUser = await userAPI.updateUserByAdmin(userId, { email: tempEmail });\r\n      setUsers(users.map(user => \r\n        user._id === userId ? updatedUser.user : user\r\n      ));\r\n      message.success('Cập nhật email thành công');\r\n      setEditingEmailUserId(null);\r\n      setTempEmail('');\r\n    } catch (error: any) {\r\n      message.error(error.response?.data?.message || 'Không thể cập nhật email');\r\n    }\r\n  };\r\n\r\n  const handleEmailCancel = () => {\r\n    setEditingEmailUserId(null);\r\n    setTempEmail('');\r\n  };\r\n\r\n  const handleEmailKeyPress = (e: React.KeyboardEvent, userId: string) => {\r\n    if (e.key === 'Enter') {\r\n      handleEmailSave(userId);\r\n    } else if (e.key === 'Escape') {\r\n      handleEmailCancel();\r\n    }\r\n  };\r\n\r\n  const filteredUsers = users.filter(user => \r\n    user.username.toLowerCase().includes(searchText.toLowerCase()) ||\r\n    user.email.toLowerCase().includes(searchText.toLowerCase())\r\n  );\r\n\r\n  const columns: ColumnsType<User> = [\r\n    {\r\n      title: 'Avatar',\r\n      dataIndex: 'avatar',\r\n      key: 'avatar',\r\n      width: 80,\r\n      render: (avatar: string, record: User) => (\r\n        <Avatar \r\n          size=\"large\" \r\n          icon={<UserOutlined />} \r\n          src={avatar}\r\n          className=\"user-avatar\"\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Tên đăng nhập',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n      sorter: (a, b) => a.username.localeCompare(b.username),\r\n    },    {\r\n      title: 'Email',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n      sorter: (a, b) => a.email.localeCompare(b.email),\r\n      render: (email: string, record: User) => {\r\n        if (editingEmailUserId === record._id && currentUser?.role === 'admin') {\r\n          return (\r\n            <Input\r\n              value={tempEmail}\r\n              onChange={(e) => setTempEmail(e.target.value)}\r\n              onBlur={() => handleEmailSave(record._id)}\r\n              onKeyDown={(e) => handleEmailKeyPress(e, record._id)}\r\n              style={{ width: '100%', border: '1px solid #1890ff' }}\r\n              autoFocus\r\n            />\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <span\r\n            onClick={() => handleEmailClick(record)}\r\n            style={{\r\n              cursor: currentUser?.role === 'admin' ? 'pointer' : 'default',\r\n              padding: '4px 8px',\r\n              borderRadius: '4px',\r\n              transition: 'background-color 0.2s',\r\n              display: 'block',\r\n              ':hover': currentUser?.role === 'admin' ? { backgroundColor: '#f0f0f0' } : {}\r\n            }}\r\n            className={currentUser?.role === 'admin' ? 'editable-email' : ''}\r\n            title={currentUser?.role === 'admin' ? 'Click để chỉnh sửa email' : ''}\r\n          >\r\n            {email}\r\n          </span>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Trạng thái',\r\n      dataIndex: 'isOnline',\r\n      key: 'isOnline',\r\n      width: 120,\r\n      render: (isOnline: boolean) => (\r\n        <Tag \r\n          icon={isOnline ? <CheckCircleOutlined /> : <CloseCircleOutlined />}\r\n          color={isOnline ? 'success' : 'default'}\r\n        >\r\n          {isOnline ? 'Online' : 'Offline'}\r\n        </Tag>\r\n      ),\r\n      filters: [\r\n        { text: 'Online', value: true },\r\n        { text: 'Offline', value: false },\r\n      ],\r\n      onFilter: (value, record) => record.isOnline === value,\r\n    },    {\r\n      title: 'Vai trò',\r\n      dataIndex: 'role',\r\n      key: 'role',\r\n      width: 100,\r\n      render: (role: string) => (\r\n        <Tag color={role === 'admin' ? 'red' : 'blue'}>\r\n          {role === 'admin' ? 'Admin' : 'User'}\r\n        </Tag>\r\n      ),\r\n      filters: [\r\n        { text: 'Admin', value: 'admin' },\r\n        { text: 'User', value: 'user' },\r\n      ],\r\n      onFilter: (value, record) => record.role === value,\r\n    },\r\n    {\r\n      title: 'Hoạt động cuối',\r\n      dataIndex: 'lastActive',\r\n      key: 'lastActive',\r\n      width: 150,\r\n      render: (lastActive: string) => {\r\n        if (!lastActive) return '-';\r\n        return new Date(lastActive).toLocaleString('vi-VN');\r\n      },\r\n      sorter: (a, b) => {\r\n        if (!a.lastActive) return 1;\r\n        if (!b.lastActive) return -1;\r\n        return new Date(a.lastActive).getTime() - new Date(b.lastActive).getTime();\r\n      },\r\n    },\r\n    {\r\n      title: 'Hành động',\r\n      key: 'actions',\r\n      width: 120,      render: (_, record: User) => (\r\n        <Space>\r\n          {currentUser?.role === 'admin' && (\r\n            <>\r\n              <Button \r\n                type=\"text\" \r\n                icon={<EditOutlined />}\r\n                size=\"small\"\r\n                onClick={() => handleEditUser(record)}\r\n                title=\"Chỉnh sửa thông tin\"\r\n              />\r\n              {record._id !== currentUser._id && (\r\n                <Popconfirm\r\n                  title=\"Xóa người dùng\"\r\n                  description=\"Bạn có chắc chắn muốn xóa người dùng này?\"\r\n                  onConfirm={() => handleDeleteUser(record._id)}\r\n                  okText=\"Xóa\"\r\n                  cancelText=\"Hủy\"\r\n                  okType=\"danger\"\r\n                >\r\n                  <Button \r\n                    type=\"text\" \r\n                    danger \r\n                    icon={<DeleteOutlined />}\r\n                    size=\"small\"\r\n                    title=\"Xóa người dùng\"\r\n                  />\r\n                </Popconfirm>\r\n              )}\r\n            </>\r\n          )}\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"users-page\">\r\n      <div className=\"users-header\">\r\n        <Title level={2}>Quản lý người dùng</Title>\r\n        <div className=\"users-actions\">\r\n          <Search\r\n            placeholder=\"Tìm kiếm theo tên hoặc email\"\r\n            allowClear\r\n            enterButton={<SearchOutlined />}\r\n            size=\"large\"\r\n            onChange={(e) => setSearchText(e.target.value)}\r\n            style={{ width: 300 }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <Card className=\"users-card\">\r\n        <Table\r\n          columns={columns}\r\n          dataSource={filteredUsers}\r\n          rowKey=\"_id\"\r\n          loading={loading}          pagination={{\r\n            pageSize: 10,\r\n            showSizeChanger: false,\r\n            showQuickJumper: true,\r\n            position: ['bottomLeft'],\r\n            showTotal: (total, range) => \r\n              `${range[0]}-${range[1]} của ${total} người dùng`,\r\n            size: \"default\"\r\n          }}\r\n          className=\"users-table\"\r\n          rowClassName={() => 'table-row'}          bordered={false}\r\n        />\r\n      </Card>\r\n\r\n      {/* Edit User Modal */}\r\n      <Modal\r\n        title=\"Chỉnh sửa thông tin người dùng\"\r\n        open={editModalVisible}\r\n        onCancel={handleCancelEdit}\r\n        footer={null}\r\n        width={500}\r\n      >\r\n        <Form\r\n          form={editForm}\r\n          layout=\"vertical\"\r\n          onFinish={handleUpdateUser}\r\n          preserve={false}\r\n        >\r\n          <Form.Item\r\n            name=\"username\"\r\n            label=\"Tên đăng nhập\"\r\n            rules={[\r\n              { required: true, message: 'Vui lòng nhập tên đăng nhập!' },\r\n              { min: 6, message: 'Tên đăng nhập phải có ít nhất 6 ký tự!' },\r\n              { max: 20, message: 'Tên đăng nhập không được quá 20 ký tự!' }\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Nhập tên đăng nhập\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"email\"\r\n            label=\"Email\"\r\n            rules={[\r\n              { required: true, message: 'Vui lòng nhập email!' },\r\n              { type: 'email', message: 'Vui lòng nhập email hợp lệ!' }\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Nhập email\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item>\r\n            <Space>\r\n              <Button type=\"primary\" htmlType=\"submit\">\r\n                Cập nhật\r\n              </Button>\r\n              <Button onClick={handleCancelEdit}>\r\n                Hủy\r\n              </Button>\r\n            </Space>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}