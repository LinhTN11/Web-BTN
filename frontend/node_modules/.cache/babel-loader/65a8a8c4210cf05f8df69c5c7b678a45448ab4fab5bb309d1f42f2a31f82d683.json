{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,Table,Button,Avatar,Tag,Space,Popconfirm,message,Typography,Input}from'antd';import{UserOutlined,DeleteOutlined,SearchOutlined,CheckCircleOutlined,CloseCircleOutlined}from'@ant-design/icons';import{userAPI}from'../../services/api';import{useAuth}from'../../contexts/AuthContext';import'./Users.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title}=Typography;const{Search}=Input;const Users=()=>{const[loading,setLoading]=useState(false);const[searchText,setSearchText]=useState('');const[editingEmailUserId,setEditingEmailUserId]=useState(null);const[tempEmail,setTempEmail]=useState('');const{user:currentUser,getUsers,refreshUsers,isUsersLoading}=useAuth();const users=getUsers();useEffect(()=>{const initUsers=async()=>{try{// Check if we already have cached data\nif(users.length>0){setLoading(false);return;}setLoading(true);// Only refresh if we don't have any cached data\nawait refreshUsers();}catch(error){message.error('Không thể tải danh sách người dùng');}finally{setLoading(false);}};initUsers();},[refreshUsers,users.length]);const handleDeleteUser=async userId=>{try{await userAPI.deleteUser(userId);message.success('Đã xóa người dùng thành công');await refreshUsers();// Refresh the cached data after deletion\n}catch(error){message.error('Không thể xóa người dùng');}};const handleEmailClick=user=>{if((currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'){setEditingEmailUserId(user._id);setTempEmail(user.email);}};const handleEmailSave=async userId=>{const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(tempEmail)){message.error('Email không hợp lệ');return;}try{await userAPI.updateUserByAdmin(userId,{email:tempEmail});await refreshUsers();// Refresh the cached data after update\nmessage.success('Cập nhật email thành công');setEditingEmailUserId(null);setTempEmail('');}catch(error){var _error$response,_error$response$data;message.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Không thể cập nhật email');}};const handleEmailCancel=()=>{setEditingEmailUserId(null);setTempEmail('');};const handleEmailKeyPress=(e,userId)=>{if(e.key==='Enter'){handleEmailSave(userId);}else if(e.key==='Escape'){handleEmailCancel();}};const filteredUsers=users.filter(user=>user.username.toLowerCase().includes(searchText.toLowerCase())||user.email.toLowerCase().includes(searchText.toLowerCase()));const finalLoading=loading||isUsersLoading();const columns=[{title:'Avatar',dataIndex:'avatar',key:'avatar',width:80,render:avatar=>/*#__PURE__*/_jsx(Avatar,{size:\"large\",icon:/*#__PURE__*/_jsx(UserOutlined,{}),src:avatar,className:\"user-avatar\"})},{title:'Tên đăng nhập',dataIndex:'username',key:'username',sorter:(a,b)=>a.username.localeCompare(b.username)},{title:'Email',dataIndex:'email',key:'email',sorter:(a,b)=>a.email.localeCompare(b.email),render:(email,record)=>{if(editingEmailUserId===record._id&&(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'){return/*#__PURE__*/_jsx(Input,{value:tempEmail,onChange:e=>setTempEmail(e.target.value),onBlur:()=>handleEmailSave(record._id),onKeyDown:e=>handleEmailKeyPress(e,record._id),style:{width:'100%',border:'1px solid #1890ff',borderRadius:'4px',boxShadow:'0 0 4px rgba(24, 144, 255, 0.2)'},placeholder:\"Nh\\u1EADp email...\",autoFocus:true});}return/*#__PURE__*/_jsx(\"span\",{onClick:()=>handleEmailClick(record),style:{cursor:(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'?'pointer':'default',padding:'4px 8px',borderRadius:'4px',transition:'background-color 0.2s',display:'block'},className:(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'?'editable-email':'',title:(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'?'Click để chỉnh sửa email • Enter để lưu • Esc để hủy':'',children:email});}},{title:'Trạng thái',dataIndex:'isOnline',key:'isOnline',width:120,render:isOnline=>/*#__PURE__*/_jsx(Tag,{icon:isOnline?/*#__PURE__*/_jsx(CheckCircleOutlined,{}):/*#__PURE__*/_jsx(CloseCircleOutlined,{}),color:isOnline?'success':'default',children:isOnline?'Online':'Offline'}),filters:[{text:'Online',value:true},{text:'Offline',value:false}],onFilter:(value,record)=>record.isOnline===value},{title:'Vai trò',dataIndex:'role',key:'role',width:100,render:role=>/*#__PURE__*/_jsx(Tag,{color:role==='admin'?'red':'blue',children:role==='admin'?'Admin':'User'}),filters:[{text:'Admin',value:'admin'},{text:'User',value:'user'}],onFilter:(value,record)=>record.role===value},{title:'Hoạt động cuối',dataIndex:'lastActive',key:'lastActive',width:150,render:lastActive=>{if(!lastActive)return'-';return new Date(lastActive).toLocaleString('vi-VN');},sorter:(a,b)=>{if(!a.lastActive)return 1;if(!b.lastActive)return-1;return new Date(a.lastActive).getTime()-new Date(b.lastActive).getTime();}},{title:'Hành động',key:'actions',width:120,render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'&&record._id!==currentUser._id&&/*#__PURE__*/_jsx(Popconfirm,{title:\"X\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng\",description:\"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0y?\",onConfirm:()=>handleDeleteUser(record._id),okText:\"X\\xF3a\",cancelText:\"H\\u1EE7y\",okType:\"danger\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),size:\"small\",title:\"X\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng\"})})})}];return/*#__PURE__*/_jsxs(\"div\",{className:\"users-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"users-header\",children:[/*#__PURE__*/_jsx(Title,{level:2,children:\"Qu\\u1EA3n l\\xFD ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsx(\"div\",{className:\"users-actions\",children:/*#__PURE__*/_jsx(Search,{placeholder:\"T\\xECm ki\\u1EBFm theo t\\xEAn ho\\u1EB7c email\",allowClear:true,enterButton:/*#__PURE__*/_jsx(SearchOutlined,{}),size:\"large\",onChange:e=>setSearchText(e.target.value),style:{width:300}})})]}),/*#__PURE__*/_jsxs(Card,{className:\"users-card\",children:[\"        \",/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:filteredUsers,rowKey:\"_id\",loading:finalLoading,pagination:{pageSize:10,showSizeChanger:false,showQuickJumper:true,position:['bottomLeft'],showTotal:(total,range)=>\"\".concat(range[0],\"-\").concat(range[1],\" c\\u1EE7a \").concat(total,\" ng\\u01B0\\u1EDDi d\\xF9ng\"),size:\"default\"},className:\"users-table\",rowClassName:()=>'table-row',bordered:false})]})]});};export default Users;","map":{"version":3,"names":["React","useState","useEffect","Card","Table","Button","Avatar","Tag","Space","Popconfirm","message","Typography","Input","UserOutlined","DeleteOutlined","SearchOutlined","CheckCircleOutlined","CloseCircleOutlined","userAPI","useAuth","jsx","_jsx","jsxs","_jsxs","Title","Search","Users","loading","setLoading","searchText","setSearchText","editingEmailUserId","setEditingEmailUserId","tempEmail","setTempEmail","user","currentUser","getUsers","refreshUsers","isUsersLoading","users","initUsers","length","error","handleDeleteUser","userId","deleteUser","success","handleEmailClick","role","_id","email","handleEmailSave","emailRegex","test","updateUserByAdmin","_error$response","_error$response$data","response","data","handleEmailCancel","handleEmailKeyPress","e","key","filteredUsers","filter","username","toLowerCase","includes","finalLoading","columns","title","dataIndex","width","render","avatar","size","icon","src","className","sorter","a","b","localeCompare","record","value","onChange","target","onBlur","onKeyDown","style","border","borderRadius","boxShadow","placeholder","autoFocus","onClick","cursor","padding","transition","display","children","isOnline","color","filters","text","onFilter","lastActive","Date","toLocaleString","getTime","_","description","onConfirm","okText","cancelText","okType","type","danger","level","allowClear","enterButton","dataSource","rowKey","pagination","pageSize","showSizeChanger","showQuickJumper","position","showTotal","total","range","concat","rowClassName","bordered"],"sources":["C:/Users/trann/Desktop/jwt-bt/frontend/src/pages/Users/Users.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Card, \r\n  Table, \r\n  Button, \r\n  Avatar, \r\n  Tag, \r\n  Space, \r\n  Popconfirm, \r\n  message, \r\n  Typography,\r\n  Input\r\n} from 'antd';\r\nimport { \r\n  UserOutlined, \r\n  DeleteOutlined, \r\n  SearchOutlined,\r\n  CheckCircleOutlined,\r\n  CloseCircleOutlined\r\n} from '@ant-design/icons';\r\nimport { userAPI } from '../../services/api';\r\nimport { User } from '../../types';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport type { ColumnsType } from 'antd/es/table';\r\nimport './Users.css';\r\n\r\nconst { Title } = Typography;\r\nconst { Search } = Input;\r\n\r\nconst Users: React.FC = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [editingEmailUserId, setEditingEmailUserId] = useState<string | null>(null);\r\n  const [tempEmail, setTempEmail] = useState('');\r\n  const { user: currentUser, getUsers, refreshUsers, isUsersLoading } = useAuth();\r\n  const users = getUsers();\r\n\r\n  useEffect(() => {\r\n    const initUsers = async () => {\r\n      try {\r\n        // Check if we already have cached data\r\n        if (users.length > 0) {\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        setLoading(true);\r\n        // Only refresh if we don't have any cached data\r\n        await refreshUsers();\r\n      } catch (error) {\r\n        message.error('Không thể tải danh sách người dùng');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    initUsers();\r\n  }, [refreshUsers, users.length]);\r\n\r\n  const handleDeleteUser = async (userId: string) => {\r\n    try {\r\n      await userAPI.deleteUser(userId);\r\n      message.success('Đã xóa người dùng thành công');\r\n      await refreshUsers(); // Refresh the cached data after deletion\r\n    } catch (error) {\r\n      message.error('Không thể xóa người dùng');\r\n    }\r\n  };\r\n\r\n  const handleEmailClick = (user: User) => {\r\n    if (currentUser?.role === 'admin') {\r\n      setEditingEmailUserId(user._id);\r\n      setTempEmail(user.email);\r\n    }\r\n  };\r\n\r\n  const handleEmailSave = async (userId: string) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(tempEmail)) {\r\n      message.error('Email không hợp lệ');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await userAPI.updateUserByAdmin(userId, { email: tempEmail });\r\n      await refreshUsers(); // Refresh the cached data after update\r\n      message.success('Cập nhật email thành công');\r\n      setEditingEmailUserId(null);\r\n      setTempEmail('');\r\n    } catch (error: any) {\r\n      message.error(error.response?.data?.message || 'Không thể cập nhật email');\r\n    }\r\n  };\r\n\r\n  const handleEmailCancel = () => {\r\n    setEditingEmailUserId(null);\r\n    setTempEmail('');\r\n  };\r\n\r\n  const handleEmailKeyPress = (e: React.KeyboardEvent, userId: string) => {\r\n    if (e.key === 'Enter') {\r\n      handleEmailSave(userId);\r\n    } else if (e.key === 'Escape') {\r\n      handleEmailCancel();\r\n    }\r\n  };\r\n  const filteredUsers = users.filter(user => \r\n    user.username.toLowerCase().includes(searchText.toLowerCase()) ||\r\n    user.email.toLowerCase().includes(searchText.toLowerCase())\r\n  );\r\n\r\n  const finalLoading = loading || isUsersLoading();\r\n\r\n  const columns: ColumnsType<User> = [\r\n    {\r\n      title: 'Avatar',\r\n      dataIndex: 'avatar',\r\n      key: 'avatar',\r\n      width: 80,\r\n      render: (avatar: string) => (\r\n        <Avatar \r\n          size=\"large\" \r\n          icon={<UserOutlined />} \r\n          src={avatar}\r\n          className=\"user-avatar\"\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Tên đăng nhập',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n      sorter: (a, b) => a.username.localeCompare(b.username),\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n      sorter: (a, b) => a.email.localeCompare(b.email),\r\n      render: (email: string, record: User) => {\r\n        if (editingEmailUserId === record._id && currentUser?.role === 'admin') {\r\n          return (\r\n            <Input\r\n              value={tempEmail}\r\n              onChange={(e) => setTempEmail(e.target.value)}\r\n              onBlur={() => handleEmailSave(record._id)}\r\n              onKeyDown={(e) => handleEmailKeyPress(e, record._id)}\r\n              style={{ \r\n                width: '100%', \r\n                border: '1px solid #1890ff',\r\n                borderRadius: '4px',\r\n                boxShadow: '0 0 4px rgba(24, 144, 255, 0.2)'\r\n              }}\r\n              placeholder=\"Nhập email...\"\r\n              autoFocus\r\n            />\r\n          );\r\n        }\r\n        \r\n        return (\r\n          <span\r\n            onClick={() => handleEmailClick(record)}\r\n            style={{\r\n              cursor: currentUser?.role === 'admin' ? 'pointer' : 'default',\r\n              padding: '4px 8px',\r\n              borderRadius: '4px',\r\n              transition: 'background-color 0.2s',\r\n              display: 'block'\r\n            }}\r\n            className={currentUser?.role === 'admin' ? 'editable-email' : ''}\r\n            title={currentUser?.role === 'admin' ? 'Click để chỉnh sửa email • Enter để lưu • Esc để hủy' : ''}\r\n          >\r\n            {email}\r\n          </span>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Trạng thái',\r\n      dataIndex: 'isOnline',\r\n      key: 'isOnline',\r\n      width: 120,\r\n      render: (isOnline: boolean) => (\r\n        <Tag \r\n          icon={isOnline ? <CheckCircleOutlined /> : <CloseCircleOutlined />}\r\n          color={isOnline ? 'success' : 'default'}\r\n        >\r\n          {isOnline ? 'Online' : 'Offline'}\r\n        </Tag>\r\n      ),\r\n      filters: [\r\n        { text: 'Online', value: true },\r\n        { text: 'Offline', value: false },\r\n      ],\r\n      onFilter: (value, record) => record.isOnline === value,\r\n    },\r\n    {\r\n      title: 'Vai trò',\r\n      dataIndex: 'role',\r\n      key: 'role',\r\n      width: 100,\r\n      render: (role: string) => (\r\n        <Tag color={role === 'admin' ? 'red' : 'blue'}>\r\n          {role === 'admin' ? 'Admin' : 'User'}\r\n        </Tag>\r\n      ),\r\n      filters: [\r\n        { text: 'Admin', value: 'admin' },\r\n        { text: 'User', value: 'user' },\r\n      ],\r\n      onFilter: (value, record) => record.role === value,\r\n    },\r\n    {\r\n      title: 'Hoạt động cuối',\r\n      dataIndex: 'lastActive',\r\n      key: 'lastActive',\r\n      width: 150,\r\n      render: (lastActive: string) => {\r\n        if (!lastActive) return '-';\r\n        return new Date(lastActive).toLocaleString('vi-VN');\r\n      },\r\n      sorter: (a, b) => {\r\n        if (!a.lastActive) return 1;\r\n        if (!b.lastActive) return -1;\r\n        return new Date(a.lastActive).getTime() - new Date(b.lastActive).getTime();\r\n      },\r\n    },\r\n    {\r\n      title: 'Hành động',\r\n      key: 'actions',\r\n      width: 120,\r\n      render: (_, record: User) => (\r\n        <Space>\r\n          {currentUser?.role === 'admin' && record._id !== currentUser._id && (\r\n            <Popconfirm\r\n              title=\"Xóa người dùng\"\r\n              description=\"Bạn có chắc chắn muốn xóa người dùng này?\"\r\n              onConfirm={() => handleDeleteUser(record._id)}\r\n              okText=\"Xóa\"\r\n              cancelText=\"Hủy\"\r\n              okType=\"danger\"\r\n            >\r\n              <Button \r\n                type=\"text\" \r\n                danger \r\n                icon={<DeleteOutlined />}\r\n                size=\"small\"\r\n                title=\"Xóa người dùng\"\r\n              />\r\n            </Popconfirm>\r\n          )}\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"users-page\">\r\n      <div className=\"users-header\">\r\n        <Title level={2}>Quản lý người dùng</Title>\r\n        <div className=\"users-actions\">\r\n          <Search\r\n            placeholder=\"Tìm kiếm theo tên hoặc email\"\r\n            allowClear\r\n            enterButton={<SearchOutlined />}\r\n            size=\"large\"\r\n            onChange={(e) => setSearchText(e.target.value)}\r\n            style={{ width: 300 }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <Card className=\"users-card\">        <Table\r\n          columns={columns}\r\n          dataSource={filteredUsers}\r\n          rowKey=\"_id\"\r\n          loading={finalLoading}\r\n          pagination={{\r\n            pageSize: 10,\r\n            showSizeChanger: false,\r\n            showQuickJumper: true,\r\n            position: ['bottomLeft'],\r\n            showTotal: (total, range) => \r\n              `${range[0]}-${range[1]} của ${total} người dùng`,\r\n            size: \"default\"\r\n          }}\r\n          className=\"users-table\"\r\n          rowClassName={() => 'table-row'}\r\n          bordered={false}\r\n        />\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}